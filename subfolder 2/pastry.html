<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Christo Bakers</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body style="background: url('pastry.jpg') no-repeat center center fixed; background-size: cover;">


<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="#">Christo Bakers</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ml-auto">
            <li class="nav-item"><a class="nav-link" href="home.html">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="pastry.html">Pastry</a></li>
            <li class="nav-item"><a class="nav-link" href="cookie.html">Cookies</a></li>
            <li class="nav-item"><a class="nav-link" href="cake.html">Cake</a></li>
            <li class="nav-item"><a class="nav-link" href="bun.html">Bun</a></li>
            <li class="nav-item"><a class="nav-link" href="baverage.html">Baverages</a></li>
        </ul>
    </div>
</nav>


<div class="container mt-4">
    <div class="row">
        <div class="col-md-3">
            <div class="card">
                <img class="pastry-img" id="img1" src="p1.jpg" class="img-thumbnail" alt="Croissant">
                <div class="card-body">
                    <h5 class="card-title">Croissant</h5>
                    <button class="btn btn-primary">Order Now</button>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card">
                <img class="pastry-img" id="img2" src="p2.jpg" class="img-thumbnail" alt="Danish Pastry">
                <div class="card-body">
                    <h5 class="card-title">Danish Pastry</h5>
                    <button class="btn btn-primary">Order Now</button>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card">
                <img class="pastry-img" id="img3" src="p3.jpg" class="img-thumbnail" alt="Puff Pastry">
                <div class="card-body">
                    <h5 class="card-title">Puff Pastry</h5>
                    <button class="btn btn-primary">Order Now</button>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card">
                <img class="pastry-img" id="img4" src="p4.jpg" class="img-thumbnail" alt="Éclair">
                <div class="card-body">
                    <h5 class="card-title">Éclair</h5>
                    <button class="btn btn-primary">Order Now</button>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="container mt-5">
    <h2 class="text-warning text-center">Pastry Menu</h2>
    <table class="table bg-white table-striped" id="Menu table">
        <thead class="table-dark">
            <tr>
                <th>Item Name</th>
                <th>Description</th>
                <th>Price (Rs)</th>
                <th>Availability</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Croissant</td>
                <td>Buttery, flaky French pastry</td>
                <td>800</td>
                <td>Available</td>
            </tr>
            <tr>
                <td>Danish Pastry</td>
                <td>Sweet pastry with fruit filling</td>
                <td>450</td>
                <td class="text-danger">Out of Stock</td>
            </tr>
            <tr>
                <td>Puff Pastry</td>
                <td>Light, crispy layers</td>
                <td>350</td>
                <td>Available</td>
            </tr>
            <tr>
                <td>Éclair</td>
                <td>Choux pastry filled with cream</td>
                <td>400</td>
                <td>Available</td>
            </tr>
        </tbody>
    </table>
</div>


<div class="container mt-4">
    <h2 class="text-warning text-center">Pastry Ingredients</h2>
    <table class="table bg-white table-bordered" id="ingredients-table">
        <thead class="table-warning">
            <tr>
                <th>Ingredient</th>
                <th>Used In Products</th>
                <th>Allergen Risk</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Flour</td>
                <td>All pastries</td>
                <td>Gluten</td>
            </tr>
            <tr>
                <td>Butter</td>
                <td>Croissant, Puff Pastry</td>
                <td>Dairy</td>
            </tr>
        </tbody>
    </table>
</div>


<div class="container mt-5">
    <h2 class="text-center text-warning">Customer Reviews</h2>
    <table class="table table-hover" id="Review">
        <thead class="table-success">
            <tr>
                <th>Name</th>
                <th>Rating (★)</th>
                <th>Review</th>
            </tr>
        </thead>
        <tbody>
            <tr class="text-warning bg-white">
                <td>Emily R.</td>
                <td>★★★★★</td>
                <td>"The croissants are heavenly!"</td>
            </tr>
            <tr class="text-warning bg-white">
                <td>Mark T.</td>
                <td>★★★★☆</td>
                <td>"Loved the éclairs, but they sell out fast."</td>
            </tr>
        </tbody>
    </table>
</div>

<!-- Explore More Section -->
<div class="container text-center mt-5">
    <h2 class="text-white">Explore More</h2>
    <div class="row" id="menu-items">
      <!-- Menu cards loaded by AJAX -->
    </div>
    <button class="btn btn-primary" id="ord-now-btn">Order now</button>
    <button class="btn btn-success" id="view-ingr-btn">View Ingredients</button>
    <button class="btn btn-warning" id="read-rew-btn">Read Reviews</button>
  </div>


<div class="container mt-5 mb-5">
    <h2 class="text-center text-warning">Add New Pastry</h2>
    <form id="pastryForm" class="bg-dark p-4 rounded" style="opacity: 0.9;">
        <div class="form-group">
            <label class="text-white">Pastry Name</label>
            <input type="text" name="name" class="form-control" placeholder="Enter pastry name" required>
        </div>
        <div class="form-group">
            <label class="text-white">Description</label>
            <input type="text" name="description" class="form-control" placeholder="Enter description" required>
        </div>
        <div class="form-group">
            <label class="text-white">Price (Rs)</label>
            <input type="number" name="price" class="form-control" placeholder="Enter price" required>
        </div>
        <div class="form-group">
            <label class="text-white">Availability</label>
            <select name="availability" class="form-control">
                <option>Available</option>
                <option>Out of Stock</option>
            </select>
        </div>
        <button type="submit" class="btn btn-success btn-block mt-3">Save Pastry</button>
    </form>
</div>


<script>

    const tableRows = document.querySelectorAll("#ingredients-table tbody tr");
    tableRows.forEach(row => {
        row.addEventListener("click", function() {
            this.style.backgroundColor = this.style.backgroundColor === "lightgoldenrodyellow" ? "" : "lightgoldenrodyellow";
        });
    });

    const buttons = document.querySelectorAll("#explore-order, #explore-ingredients, #explore-reviews");
    buttons.forEach(button => {
        button.addEventListener("mousedown", function() {
            this.style.transform = "scale(0.9)";
        });
        button.addEventListener("mouseup", function() {
            this.style.transform = "scale(1)";
        });
    });

    const images = [
        { id: "img1", original: "p1.jpg", hover: "pa1.jpg" },
        { id: "img2", original: "p2.jpg", hover: "pa2.jpg" },
        { id: "img3", original: "p3.jpg", hover: "pa3.jpg" },
        { id: "img4", original: "p4.jpg", hover: "pa4.jpg" }
    ];

    images.forEach(img => {
        const element = document.getElementById(img.id);
        element.addEventListener("mouseover", function() {
            this.src = img.hover;
        });
        element.addEventListener("mouseout", function() {
            this.src = img.original;
        });
    });


    document.getElementById('pastryForm').addEventListener('submit', function(e) {
        e.preventDefault();

        const formData = new FormData(this);

        fetch('save_pastry.php', {
            method: 'POST',
            body: formData
        })
        .then(response => response.text())
        .then(data => {
            alert(data);
            this.reset();
            loadPastries();
        })
        .catch(error => {
            console.error('Error:', error);
        });
    });


    function loadPastries() {
        fetch('get_pastries.php')
        .then(response => response.json())
        .then(data => {
            const tbody = document.querySelector('#Menu\\ table tbody');
            tbody.innerHTML = '';

            data.forEach(pastry => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${pastry.name}</td>
                    <td>${pastry.description}</td>
                    <td>${pastry.price}</td>
                    <td>${pastry.availability}</td>
                `;
                tbody.appendChild(tr);
            });
        })
        .catch(error => console.error('Error loading pastries:', error));
    }


    loadPastries();
</script>

</body>
</html>
